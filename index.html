<!DOCTYPE html>
<html lang="{{LANG}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{PAGE_TITLE}}</title>
    <meta name="description" content="{{META_DESCRIPTION}}">
    <link rel="canonical" href="{{CANONICAL}}">
    {{HREFLANG_TAGS}}

    <!-- Scripts & Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "{{H1}}",
      "datePublished": "{{DATE_PUBLISHED}}",
      "author": {
        "@type": "Person",
        "name": "{{AUTHOR_NAME}}"
      }
    }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
        .gradient-hero { background: linear-gradient(135deg, #064e3b 0%, #022c22 100%); }
        .casino-card:hover { transform: translateY(-4px); transition: all 0.3s ease; }
        .filter-btn.active { background-color: #059669; color: white; border-color: #059669; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .faq-item.active .faq-answer { max-height: 500px; }
        .faq-item.active i { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <!-- Affiliate Disclosure -->
    <div class="bg-slate-100 border-b border-slate-200 py-2 text-center text-[10px] uppercase tracking-widest text-slate-500">
        {{BADGE_TEXT}} | Pubblicità: Questo sito riceve compensi dai partner elencati.
    </div>

    <!-- Sticky Navigation -->
    <nav class="sticky top-0 z-50 glass-nav border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white font-bold italic">iM</div>
                <span class="font-bold text-xl tracking-tight">Immorale<span class="text-emerald-600">Milano</span></span>
            </div>
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-600">
                <a href="#casinos" class="hover:text-emerald-600 transition">Casino Lista</a>
                <a href="#methodology" class="hover:text-emerald-600 transition">Metodologia</a>
                <a href="#faq" class="hover:text-emerald-600 transition">FAQ</a>
            </div>
            <div class="flex items-center gap-4">
                <span class="text-xs text-slate-400 hidden sm:block italic">{{LAST_UPDATED}}</span>
                <button class="bg-emerald-600 text-white px-4 py-2 rounded-full text-sm font-bold hover:bg-emerald-700 transition shadow-lg shadow-emerald-200">
                    TOP SITI
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="gradient-hero py-16 md:py-24 text-white relative overflow-hidden">
        <div class="absolute inset-0 opacity-10 pointer-events-none">
            <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" stroke-width="1"/></pattern></defs>
                <rect width="100%" height="100%" fill="url(#grid)" />
            </svg>
        </div>
        <div class="max-w-5xl mx-auto px-4 relative z-10 text-center">
            <div class="inline-flex items-center gap-2 bg-emerald-500/20 border border-emerald-400/30 px-3 py-1 rounded-full text-emerald-300 text-xs font-bold mb-6">
                <i data-lucide="shield-check" class="w-4 h-4"></i> {{BADGE_TEXT}}
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight tracking-tight">{{H1}}</h1>
            <p class="text-lg md:text-xl text-emerald-100/80 mb-10 max-w-3xl mx-auto leading-relaxed">{{HERO_DESCRIPTION}}</p>
            
            <div class="flex flex-col sm:flex-row items-center justify-center gap-6 p-6 bg-white/5 rounded-2xl border border-white/10 backdrop-blur-sm">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 rounded-full bg-emerald-500 flex items-center justify-center text-xl font-bold text-emerald-950 border-2 border-emerald-400 shadow-xl">
                        {{AUTHOR_NAME[0]}}
                    </div>
                    <div class="text-left">
                        <div class="font-bold text-white">{{AUTHOR_NAME}}</div>
                        <div class="text-emerald-300 text-xs uppercase tracking-wider">{{AUTHOR_TITLE}}</div>
                    </div>
                </div>
                <div class="hidden sm:block w-px h-12 bg-white/10"></div>
                <p class="italic text-emerald-100/70 text-sm max-w-sm text-left">"{{AUTHOR_QUOTE}}"</p>
            </div>
        </div>
    </header>

    <!-- Top 3 Cards -->
    <section class="max-w-7xl mx-auto px-4 -mt-12 relative z-20">
        <div id="top-cards" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Rendered by JS -->
        </div>
    </section>

    <!-- Comparison Table Section -->
    <section id="casinos" class="max-w-7xl mx-auto px-4 py-20">
        <div class="flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8">
            <div>
                <h2 class="text-3xl font-bold mb-2">Confronto Casino Non AAMS</h2>
                <p class="text-slate-500">Filtra per le caratteristiche che contano di più per il tuo stile di gioco.</p>
            </div>
            <div class="flex flex-wrap gap-2">
                <button onclick="filterCasinos('all')" class="filter-btn active border px-4 py-2 rounded-lg text-sm font-semibold transition">{{FILTER_ALL}}</button>
                <button onclick="filterCasinos('top')" class="filter-btn border px-4 py-2 rounded-lg text-sm font-semibold transition">{{FILTER_TOP_RATED}}</button>
                <button onclick="filterCasinos('fast')" class="filter-btn border px-4 py-2 rounded-lg text-sm font-semibold transition">{{FILTER_FAST_PAYOUT}}</button>
                <select onchange="sortCasinos(this.value)" class="border px-4 py-2 rounded-lg text-sm font-semibold bg-white outline-none focus:ring-2 focus:ring-emerald-500">
                    <option value="recommended">{{SORT_RECOMMENDED}}</option>
                    <option value="rating">{{SORT_RATING}}</option>
                    <option value="name">{{SORT_NAME}}</option>
                </select>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-xl shadow-slate-200/60 border border-slate-200 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50 border-b border-slate-200">
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider">{{COL_BRAND}}</th>
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider">{{COL_RATING}}</th>
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider">{{COL_BONUS}}</th>
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider hidden md:table-cell">{{COL_PAYMENTS}}</th>
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider">{{COL_HIGHLIGHT}}</th>
                            <th class="px-6 py-4 text-xs font-bold uppercase text-slate-400 tracking-wider text-center">{{COL_ACTION}}</th>
                        </tr>
                    </thead>
                    <tbody id="casino-table-body" class="divide-y divide-slate-100">
                        <!-- Rendered by JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Content Section -->
    <article class="max-w-4xl mx-auto px-4 py-16 prose prose-slate prose-emerald lg:prose-lg">
        {{ARTICLE_CONTENT}}
    </article>

    <!-- Methodology Section -->
    <section id="methodology" class="bg-slate-900 py-20 text-white overflow-hidden relative">
        <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row gap-12 items-center">
            <div class="md:w-1/2">
                <div class="inline-block px-4 py-1 bg-emerald-500/20 text-emerald-400 rounded-full text-xs font-bold mb-6">IL NOSTRO PROCESSO</div>
                <h2 class="text-4xl font-bold mb-6">{{METHODOLOGY_TITLE}}</h2>
                <div class="text-slate-300 space-y-4 leading-relaxed">
                    {{METHODOLOGY_TEXT}}
                </div>
            </div>
            <div class="md:w-1/2 w-full">
                <div class="bg-white/5 border border-white/10 p-8 rounded-3xl backdrop-blur-sm">
                    <div class="flex items-center gap-6 mb-8">
                        <div class="w-20 h-20 rounded-full bg-emerald-500 flex items-center justify-center text-3xl font-bold text-emerald-950 border-4 border-emerald-400/30">
                            {{AUTHOR_NAME[0]}}
                        </div>
                        <div>
                            <h3 class="text-xl font-bold italic">{{AUTHOR_NAME}}</h3>
                            <p class="text-emerald-400 font-medium">{{AUTHOR_TITLE}}</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-4 bg-white/5 rounded-xl">
                            <i data-lucide="check-circle" class="w-5 h-5 text-emerald-500 mb-2"></i>
                            <div class="text-sm font-bold">Payout Testati</div>
                        </div>
                        <div class="p-4 bg-white/5 rounded-xl">
                            <i data-lucide="shield" class="w-5 h-5 text-emerald-500 mb-2"></i>
                            <div class="text-sm font-bold">Licenze Verificate</div>
                        </div>
                        <div class="p-4 bg-white/5 rounded-xl">
                            <i data-lucide="database" class="w-5 h-5 text-emerald-500 mb-2"></i>
                            <div class="text-sm font-bold">Analisi Dati</div>
                        </div>
                        <div class="p-4 bg-white/5 rounded-xl">
                            <i data-lucide="users" class="w-5 h-5 text-emerald-500 mb-2"></i>
                            <div class="text-sm font-bold">UX Audit</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="max-w-4xl mx-auto px-4 py-24">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold mb-4">{{FAQ_TITLE}}</h2>
            <div class="w-24 h-1 bg-emerald-600 mx-auto"></div>
        </div>
        <div class="space-y-4" id="faq-container">
            {{FAQ_ITEMS}}
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-950 text-slate-400 py-16 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                <div class="lg:col-span-2">
                    <div class="flex items-center gap-2 mb-6 text-white">
                        <div class="w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center text-white font-bold italic">iM</div>
                        <span class="font-bold text-xl">Immorale<span class="text-emerald-600">Milano</span></span>
                    </div>
                    <p class="mb-6 max-w-md leading-relaxed">{{FOOTER_DESCRIPTION}}</p>
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded-lg bg-slate-900 border border-slate-800 flex items-center justify-center">18+</div>
                        <div class="w-10 h-10 rounded-lg bg-slate-900 border border-slate-800 flex items-center justify-center">GambleAware</div>
                    </div>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">Navigazione</h4>
                    <ul class="space-y-4 text-sm">
                        <li><a href="#" class="hover:text-emerald-500 transition">Migliori Casino</a></li>
                        <li><a href="#" class="hover:text-emerald-500 transition">Prelievo Immediato</a></li>
                        <li><a href="#" class="hover:text-emerald-500 transition">Siti Non AAMS</a></li>
                        <li><a href="#" class="hover:text-emerald-500 transition">Metodologia</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-white font-bold mb-6">Legale</h4>
                    <ul class="space-y-4 text-sm">
                        <li><a href="#" class="hover:text-emerald-500 transition">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-emerald-500 transition">Cookie Policy</a></li>
                        <li><a href="#" class="hover:text-emerald-500 transition">Contatti</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-12 border-t border-slate-900 text-center">
                <p class="text-xs uppercase tracking-widest mb-8 text-slate-500">{{COMPLIANCE_TEXT}}</p>
                <p class="text-sm">&copy; {{YEAR}} immoralemilano5.com. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        const casinos = {{CASINOS_JSON}};

        function renderTopCards() {
            const container = document.getElementById('top-cards');
            const top3 = casinos.slice(0, 3);
            const badges = ['Scelta Redazione', 'Miglior Payout', 'Miglior Bonus'];
            
            container.innerHTML = top3.map((c, i) => `
                <div class="casino-card bg-white rounded-2xl shadow-xl p-6 border border-slate-200 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-emerald-600 text-white px-4 py-1 text-[10px] font-bold uppercase rounded-bl-xl">
                        ${badges[i]}
                    </div>
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-16 h-16 bg-slate-100 rounded-xl flex items-center justify-center p-2 border border-slate-200">
                            <span class="font-black text-xs text-slate-400">${c.name}</span>
                        </div>
                        <div>
                            <div class="flex items-center gap-1 text-amber-500 mb-1">
                                <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                                <span class="text-sm font-bold text-slate-900">${c.rating}</span>
                            </div>
                            <h3 class="font-bold text-lg leading-none">${c.name}</h3>
                        </div>
                    </div>
                    <div class="bg-emerald-50 rounded-xl p-4 mb-6 border border-emerald-100">
                        <div class="text-[10px] uppercase font-bold text-emerald-600 mb-1">Bonus Benvenuto</div>
                        <div class="text-lg font-black text-slate-900 leading-tight">${c.bonus}</div>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center gap-2 text-sm text-slate-600">
                            <i data-lucide="zap" class="w-4 h-4 text-emerald-500"></i>
                            <span>Prelievo: <strong>${c.payout}</strong></span>
                        </li>
                        <li class="flex items-center gap-2 text-sm text-slate-600">
                            <i data-lucide="check" class="w-4 h-4 text-emerald-500"></i>
                            <span>${c.highlight}</span>
                        </li>
                    </ul>
                    <a href="${c.url}" class="block w-full bg-slate-900 text-white text-center py-4 rounded-xl font-bold hover:bg-emerald-600 transition shadow-lg">
                        VISITA IL SITO
                    </a>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderTable(data) {
            const body = document.getElementById('casino-table-body');
            body.innerHTML = data.map(c => `
                <tr class="hover:bg-slate-50/80 transition">
                    <td class="px-6 py-6">
                        <div class="flex items-center gap-4">
                            <span class="text-xs font-bold text-slate-300 w-4">#${c.rank}</span>
                            <div class="w-12 h-12 bg-white border border-slate-200 rounded-lg flex items-center justify-center p-1">
                                <span class="text-[8px] font-bold text-slate-400 uppercase">${c.name}</span>
                            </div>
                            <div class="font-bold text-slate-900">${c.name}</div>
                        </div>
                    </td>
                    <td class="px-6 py-6">
                        <div class="flex items-center gap-1 text-amber-500">
                            <i data-lucide="star" class="w-4 h-4 fill-current"></i>
                            <span class="font-bold text-slate-900">${c.rating}</span>
                        </div>
                    </td>
                    <td class="px-6 py-6">
                        <div class="text-sm font-bold text-slate-900 leading-tight">${c.bonus}</div>
                    </td>
                    <td class="px-6 py-6 hidden md:table-cell">
                        <div class="text-[10px] text-slate-500 max-w-[120px] leading-relaxed">
                            <i data-lucide="credit-card" class="w-3 h-3 inline mr-1"></i> ${c.payments}
                        </div>
                    </td>
                    <td class="px-6 py-6">
                        <div class="inline-flex items-center gap-1 px-3 py-1 bg-emerald-50 text-emerald-700 rounded-full text-[10px] font-bold">
                            <i data-lucide="clock" class="w-3 h-3"></i> ${c.payout}
                        </div>
                    </td>
                    <td class="px-6 py-6 text-center">
                        <a href="${c.url}" class="inline-block bg-emerald-600 text-white px-6 py-2.5 rounded-lg font-bold text-sm hover:bg-emerald-700 transition">
                            GIOCA
                        </a>
                    </td>
                </tr>
            `).join('');
            lucide.createIcons();
        }

        function filterCasinos(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            let filtered = [...casinos];
            if (type === 'top') filtered = casinos.filter(c => parseFloat(c.rating) >= 4.8);
            if (type === 'fast') filtered = casinos.filter(c => c.payout.toLowerCase().includes('immediato') || c.payout.toLowerCase().includes('ore'));
            
            renderTable(filtered);
        }

        function sortCasinos(criteria) {
            let sorted = [...casinos];
            if (criteria === 'rating') sorted.sort((a, b) => b.rating - a.rating);
            if (criteria === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name));
            if (criteria === 'recommended') sorted.sort((a, b) => a.rank - b.rank);
            renderTable(sorted);
        }

        function toggleFaq(index) {
            const items = document.querySelectorAll('.faq-item');
            items[index].classList.toggle('active');
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderTopCards();
            renderTable(casinos);
            lucide.createIcons();

            // Setup FAQ toggles (since {{FAQ_ITEMS}} is injected)
            document.querySelectorAll('.faq-item').forEach((item, idx) => {
                item.addEventListener('click', () => toggleFaq(idx));
            });
        });
    </script>
</body>
</html>