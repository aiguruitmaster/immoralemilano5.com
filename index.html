<!DOCTYPE html>
<html lang="{{LANG}}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{PAGE_TITLE}}</title>
    <meta name="description" content="{{META_DESCRIPTION}}">
    <link rel="canonical" href="{{CANONICAL}}">
    {{HREFLANG_TAGS}}

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "{{H1}}",
      "datePublished": "{{DATE_PUBLISHED}}",
      "author": {
        "@type": "Person",
        "name": "{{AUTHOR_NAME}}"
      }
    }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .sticky-nav { position: sticky; top: 0; z-index: 50; }
        .casino-row:nth-child(even) { background-color: #f1f5f9; }
        .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        .accent-border { border-left: 4px solid #10b981; }
    </style>
</head>
<body class="text-slate-900">

    <!-- Affiliate Disclosure -->
    <div class="bg-slate-100 py-2 border-b border-slate-200">
        <div class="container mx-auto px-4 text-center">
            <p class="text-[10px] uppercase tracking-widest text-slate-500 font-semibold">
                Informativa Pubblicitaria: Questo sito riceve commissioni dai brand recensiti.
            </p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="sticky-nav bg-white shadow-md border-b border-slate-200">
        <div class="container mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-emerald-500 rounded flex items-center justify-center text-white font-bold">I</div>
                <span class="font-bold text-xl tracking-tight">ImmoraleMilano<span class="text-emerald-500">5</span></span>
            </div>
            <div class="hidden md:flex gap-6 font-medium text-slate-600">
                <a href="#" class="hover:text-emerald-600">Casino</a>
                <a href="#" class="hover:text-emerald-600">Non AAMS</a>
                <a href="#" class="hover:text-emerald-600">Metodi Prelievo</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="gradient-bg text-white pt-12 pb-20">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="flex-1 text-center md:text-left">
                    <div class="inline-flex items-center gap-2 bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full text-sm font-bold mb-6">
                        <i data-lucide="shield-check" class="w-4 h-4"></i>
                        {{BADGE_TEXT}}
                    </div>
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight">{{H1}}</h1>
                    <p class="text-xl text-slate-300 mb-8 leading-relaxed max-w-2xl">{{HERO_DESCRIPTION}}</p>
                    
                    <div class="flex items-center justify-center md:justify-start gap-4 p-4 bg-white/5 rounded-xl border border-white/10 backdrop-blur-sm">
                        <div class="w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center text-xl font-bold text-white">
                            {{AUTHOR_NAME[0]}}
                        </div>
                        <div class="text-left">
                            <p class="font-bold text-emerald-400">{{AUTHOR_NAME}}</p>
                            <p class="text-xs text-slate-400 uppercase tracking-tighter">{{AUTHOR_TITLE}}</p>
                            <p class="text-sm italic text-slate-300 mt-1">"{{AUTHOR_QUOTE}}"</p>
                        </div>
                    </div>
                    <p class="mt-4 text-xs text-slate-500 italic">{{LAST_UPDATED}}</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Top 3 Cards -->
    <section class="-mt-12 container mx-auto px-4 mb-16">
        <div id="top-cards" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Rendered by JS -->
        </div>
    </section>

    <!-- Comparison Table -->
    <section class="container mx-auto px-4 mb-16">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-200">
            <!-- Filter Bar -->
            <div class="p-4 border-b border-slate-100 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex p-1 bg-slate-200 rounded-lg gap-1">
                    <button onclick="filterCasinos('all')" class="px-4 py-2 rounded-md text-sm font-bold transition-all bg-white shadow-sm text-slate-900" id="filter-all">{{FILTER_ALL}}</button>
                    <button onclick="filterCasinos('top')" class="px-4 py-2 rounded-md text-sm font-bold text-slate-600 hover:bg-white/50" id="filter-top">{{FILTER_TOP_RATED}}</button>
                    <button onclick="filterCasinos('fast')" class="px-4 py-2 rounded-md text-sm font-bold text-slate-600 hover:bg-white/50" id="filter-fast">{{FILTER_FAST_PAYOUT}}</button>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-sm font-semibold text-slate-500">Sort by:</span>
                    <select onchange="sortCasinos(this.value)" class="bg-white border border-slate-300 rounded-lg px-3 py-2 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500">
                        <option value="rank">{{SORT_RECOMMENDED}}</option>
                        <option value="rating">{{SORT_RATING}}</option>
                        <option value="name">{{SORT_NAME}}</option>
                    </select>
                </div>
            </div>

            <!-- Table Header -->
            <div class="hidden lg:grid grid-cols-12 gap-4 p-4 bg-slate-900 text-white text-xs font-bold uppercase tracking-wider">
                <div class="col-span-2">{{COL_BRAND}}</div>
                <div class="col-span-1 text-center">{{COL_RATING}}</div>
                <div class="col-span-3">{{COL_BONUS}}</div>
                <div class="col-span-2">{{COL_PAYMENTS}}</div>
                <div class="col-span-2">{{COL_HIGHLIGHT}}</div>
                <div class="col-span-2 text-center">{{COL_ACTION}}</div>
            </div>

            <div id="casino-list">
                <!-- Rendered by JS -->
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="container mx-auto px-4 mb-16 max-w-4xl prose prose-slate prose-emerald">
        <div class="bg-white p-8 md:p-12 rounded-2xl shadow-sm border border-slate-200">
            {{ARTICLE_CONTENT}}
        </div>
    </section>

    <!-- Methodology Section -->
    <section class="bg-slate-900 text-white py-16 mb-16">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <h2 class="text-3xl font-bold mb-8 text-center">{{METHODOLOGY_TITLE}}</h2>
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <div class="space-y-4">
                        <p class="text-slate-400 leading-relaxed">{{METHODOLOGY_TEXT}}</p>
                        <ul class="space-y-2">
                            <li class="flex items-center gap-3 text-emerald-400 font-semibold">
                                <i data-lucide="check-circle-2" class="w-5 h-5"></i> Licenza verificata
                            </li>
                            <li class="flex items-center gap-3 text-emerald-400 font-semibold">
                                <i data-lucide="zap" class="w-5 h-5"></i> Velocità prelievi reale
                            </li>
                            <li class="flex items-center gap-3 text-emerald-400 font-semibold">
                                <i data-lucide="shield" class="w-5 h-5"></i> Protocolli SSL attivi
                            </li>
                        </ul>
                    </div>
                    <div class="bg-white/5 p-6 rounded-2xl border border-white/10">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-16 h-16 rounded-full bg-emerald-500 flex items-center justify-center text-2xl font-bold">
                                {{AUTHOR_NAME[0]}}
                            </div>
                            <div>
                                <h4 class="text-xl font-bold">{{AUTHOR_NAME}}</h4>
                                <p class="text-emerald-400 text-sm">{{AUTHOR_TITLE}}</p>
                            </div>
                        </div>
                        <p class="text-sm italic text-slate-300">"Il mio obiettivo è garantire che ogni giocatore trovi una piattaforma sicura e trasparente, con pagamenti veloci senza complicazioni burocratiche."</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="container mx-auto px-4 mb-16 max-w-3xl">
        <h2 class="text-3xl font-bold mb-8 text-center">{{FAQ_TITLE}}</h2>
        <div id="faq" class="space-y-4">
            {{FAQ_ITEMS}}
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-950 text-slate-400 py-16 border-t border-slate-800">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-2 gap-12 mb-12">
                <div>
                    <div class="flex items-center gap-2 mb-6">
                        <div class="w-8 h-8 bg-emerald-500 rounded flex items-center justify-center text-white font-bold">I</div>
                        <span class="font-bold text-xl tracking-tight text-white">ImmoraleMilano<span class="text-emerald-500">5</span></span>
                    </div>
                    <p class="text-sm leading-relaxed mb-6">{{FOOTER_DESCRIPTION}}</p>
                    <div class="flex gap-4">
                        <div class="w-10 h-10 rounded bg-slate-800 flex items-center justify-center font-bold text-white">18+</div>
                        <div class="px-4 h-10 rounded bg-slate-800 flex items-center justify-center text-xs font-bold uppercase">BeGambleAware</div>
                    </div>
                </div>
                <div class="bg-slate-900 p-6 rounded-xl border border-slate-800">
                    <h5 class="text-white font-bold mb-4 flex items-center gap-2">
                        <i data-lucide="alert-triangle" class="w-5 h-5 text-yellow-500"></i>
                        Gioco Responsabile
                    </h5>
                    <p class="text-xs leading-relaxed text-slate-500 italic">{{COMPLIANCE_TEXT}}</p>
                </div>
            </div>
            <div class="pt-8 border-t border-slate-800 text-center text-xs">
                <p>&copy; {{YEAR}} immoralemilano5.com - All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        const casinos = {{CASINOS_JSON}};

        function renderTopCards() {
            const container = document.getElementById('top-cards');
            const top3 = casinos.slice(0, 3);
            container.innerHTML = top3.map((c, i) => `
                <div class="bg-white rounded-2xl shadow-lg border-2 ${i === 0 ? 'border-emerald-500' : 'border-slate-100'} p-6 flex flex-col items-center text-center transform hover:-translate-y-1 transition-all">
                    ${i === 0 ? '<span class="bg-emerald-500 text-white text-[10px] font-bold px-3 py-1 rounded-full uppercase mb-4 tracking-widest">Scelta Migliore</span>' : ''}
                    <div class="w-16 h-16 bg-slate-100 rounded-xl flex items-center justify-center mb-4 overflow-hidden font-bold text-slate-400 text-xs">
                        ${c.logo ? `<img src="${c.logo}" alt="${c.name}" class="w-full h-full object-contain p-2">` : c.name}
                    </div>
                    <h3 class="font-extrabold text-xl mb-1">${c.name}</h3>
                    <div class="flex text-yellow-500 mb-4">
                        ${Array(5).fill(0).map((_, j) => `<i data-lucide="star" class="w-4 h-4 ${j < Math.floor(c.rating) ? 'fill-current' : ''}"></i>`).join('')}
                    </div>
                    <p class="text-emerald-600 font-bold text-lg mb-6 leading-tight">${c.bonus}</p>
                    <a href="${c.url}" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 rounded-xl shadow-lg shadow-emerald-500/30 transition-all">
                        GIOCA ORA
                    </a>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderTable(data) {
            const container = document.getElementById('casino-list');
            container.innerHTML = data.map(c => `
                <div class="casino-row grid grid-cols-1 lg:grid-cols-12 gap-4 p-6 lg:p-4 items-center border-b border-slate-100">
                    <!-- Mobile Brand Header -->
                    <div class="col-span-12 lg:col-span-2 flex items-center gap-4">
                        <div class="w-12 h-12 bg-white rounded border border-slate-200 flex items-center justify-center font-bold text-slate-400 text-[10px] overflow-hidden">
                            ${c.logo ? `<img src="${c.logo}" alt="${c.name}" class="w-full h-full object-contain p-1">` : c.name}
                        </div>
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-tighter">Rank #${c.rank}</span>
                            <h4 class="font-bold text-lg leading-none">${c.name}</h4>
                        </div>
                    </div>

                    <!-- Rating -->
                    <div class="col-span-6 lg:col-span-1 flex lg:justify-center items-center gap-1">
                        <span class="font-bold text-slate-700">${c.rating}</span>
                        <i data-lucide="star" class="w-4 h-4 fill-yellow-500 text-yellow-500"></i>
                    </div>

                    <!-- Bonus -->
                    <div class="col-span-12 lg:col-span-3">
                        <p class="text-sm font-bold text-emerald-600">${c.bonus}</p>
                    </div>

                    <!-- Payments -->
                    <div class="col-span-12 lg:col-span-2 flex flex-wrap gap-1">
                        ${c.payments.split(',').map(p => `<span class="px-2 py-1 bg-slate-200 rounded text-[10px] font-bold text-slate-600 uppercase">${p.trim()}</span>`).join('')}
                    </div>

                    <!-- Highlight -->
                    <div class="col-span-12 lg:col-span-2">
                        <div class="flex items-center gap-2 text-xs font-semibold text-slate-500">
                            <i data-lucide="zap" class="w-3 h-3 text-emerald-500"></i>
                            ${c.highlight}
                        </div>
                        <div class="text-[10px] text-slate-400 mt-1">Payout: ${c.payout}</div>
                    </div>

                    <!-- CTA -->
                    <div class="col-span-12 lg:col-span-2">
                        <a href="${c.url}" class="block w-full text-center bg-slate-900 hover:bg-emerald-600 text-white font-bold py-3 lg:py-2 rounded-lg transition-all text-sm">
                            SITO WEB
                        </a>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function filterCasinos(type) {
            // UI Update
            ['all', 'top', 'fast'].forEach(id => {
                const btn = document.getElementById(`filter-${id}`);
                btn.classList.remove('bg-white', 'shadow-sm', 'text-slate-900');
                btn.classList.add('text-slate-600', 'hover:bg-white/50');
            });
            const activeBtn = document.getElementById(`filter-${type}`);
            activeBtn.classList.add('bg-white', 'shadow-sm', 'text-slate-900');

            // Logic
            let filtered = [...casinos];
            if (type === 'top') filtered = casinos.filter(c => c.rating >= 4.8);
            if (type === 'fast') filtered = casinos.filter(c => c.payout.toLowerCase().includes('ist') || c.payout.toLowerCase().includes('ora'));
            renderTable(filtered);
        }

        function sortCasinos(criteria) {
            let sorted = [...casinos];
            if (criteria === 'rating') sorted.sort((a, b) => b.rating - a.rating);
            if (criteria === 'name') sorted.sort((a, b) => a.name.localeCompare(b.name));
            if (criteria === 'rank') sorted.sort((a, b) => a.rank - b.rank);
            renderTable(sorted);
        }

        function toggleFaq(index) {
            const content = document.getElementById(`faq-content-${index}`);
            const icon = document.getElementById(`faq-icon-${index}`);
            const isHidden = content.classList.contains('hidden');
            
            // Close all
            document.querySelectorAll('[id^="faq-content-"]').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('[id^="faq-icon-"]').forEach(el => el.style.transform = 'rotate(0deg)');

            if (isHidden) {
                content.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderTopCards();
            renderTable(casinos);
            lucide.createIcons();
        });
    </script>
</body>
</html>